<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>新上五島町立若松中学校オリジナルデジタルコンテンツ</title>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<style>
  html, body {
    margin: 0; padding: 0;
    width: 100vw; height: 100vh;
    overflow: hidden;
    background: #fff;
  }

  #parentContainer {
    position: absolute;
    width: 1920px;
    height: 1080px;
    left: 50%;
    top: 50%;
    transform-origin: 50% 50%;
    transform: translate(-50%, -50%);
    overflow: hidden;
    background: #fff;
  }

  #background {
    position: absolute;
    width: 100%;
    height: 100%;
    background: url('wall_paper.svg') no-repeat center center;
    background-size: cover;
    z-index: 0;
  }

  .menu-btn {
    position: absolute;
    width: 354px;
    height: 70.8px;
    left: 27.6px;
    background-size: cover;
    background-repeat: no-repeat;
    cursor: pointer;
    z-index: 5;
    transition: all 0.7s ease;
  }

  .menu-btn.selected {
    width: 384.3px;
    height: 76.9px;
  }

  .svg-btn {
    position: absolute;
    width: 207.1px;
    height: 68.9px;
    left: 1702.8px;
    background-size: cover;
    background-repeat: no-repeat;
    cursor: pointer;
    z-index: 4;
  }

  .semi-transparent {
    opacity: 0.5;
  }

  #previewContainer {
    position: absolute;
    width: 1269.7px;
    height: 899.2px;
    left: 411.9px;
    top: 174px;
    background: #ddd;
    overflow: hidden;
    border-radius: 10px;
    z-index: 6;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
  }

  #previewFrame {
    width: 100%;
    height: 100%;
    border: none;
    display: none;
    pointer-events: none;
  }

  #iframeLoader {
    position: absolute;
    width: 100%;
    height: 100%;
    background: rgba(100, 100, 100, 0.4);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 8;
  }

  #pageLoader {
    position: fixed;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    background: rgba(100, 100, 100, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
  }

  .spinner {
    width: 60px;
    height: 60px;
    border: 6px solid rgba(255,255,255,0.3);
    border-top-color: #fff;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }

  @keyframes spin { to { transform: rotate(360deg); } }

  #noContentMsg {
    font-size: 35px;
    color: #444;
    background: #f2f2f2;
    width: 100%;
    height: 100%;
    display: none;
    align-items: center;
    justify-content: center;
    border-radius: 10px;
  }

  #fullscreenOverlay {
    position: absolute;
    width: 1920px;
    height: 1080px;
    left: 0;
    top: 0;
    background: rgba(0,0,0,0.9);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 10;
  }

  #fullscreenFrame {
    width: 1920px;
    height: 1080px;
    border: none;
    pointer-events: auto;
  }

  #closeBtn {
    position: absolute;
    width: 55.3px;
    height: 55.3px;
    left: 1858.7px;
    top: 6.3px;
    background-image: url('close.svg');
    background-size: contain;
    background-repeat: no-repeat;
    cursor: pointer;
    display: none;
    z-index: 11;
  }
</style>
</head>
<body>
  <div id="pageLoader"><div class="spinner"></div></div>

  <div id="parentContainer">
    <div id="background"></div>

    <!-- 左ボタン -->
    <div id="selectBtn1" class="menu-btn" style="top:139.5px; background-image:url('1_tougo.png');"></div>
    <div id="selectBtn2" class="menu-btn" style="top:210.3px; background-image:url('2_new_wjh_soran.png');"></div>
    <div id="selectBtn3" class="menu-btn" style="top:281.1px; background-image:url('3.png');"></div>
    <div id="selectBtn4" class="menu-btn" style="top:351.9px; background-image:url('4.png');"></div>
    <div id="selectBtn5" class="menu-btn" style="top:422.7px; background-image:url('5.png');"></div>
    <div id="selectBtn6" class="menu-btn" style="top:493.5px; background-image:url('6.png');"></div>
    <div id="selectBtn7" class="menu-btn" style="top:564.3px; background-image:url('7.png');"></div>
    <div id="selectBtn8" class="menu-btn" style="top:635.1px; background-image:url('8.png');"></div>

    <!-- 右ボタン -->
    <div id="svgBtn1" class="svg-btn" style="top:139.5px; background-image:url('1.svg');"></div>
    <div id="svgBtn2" class="svg-btn" style="top:208.4px; background-image:url('2.svg');"></div>
    <div id="svgBtn3" class="svg-btn" style="top:277.3px; background-image:url('3.svg');"></div>
    <div id="svgBtn4" class="svg-btn" style="top:346.2px; background-image:url('4.svg');"></div>
    <div id="svgBtn5" class="svg-btn" style="top:415.1px; background-image:url('5.svg');"></div>
    <div id="svgBtn6" class="svg-btn semi-transparent" style="top:484px; background-image:url('6.svg');"></div>
    <div id="svgBtn8" class="svg-btn semi-transparent" style="top:552.9px; background-image:url('8.svg');"></div>
    <div id="svgBtn9" class="svg-btn" style="top:621.8px; background-image:url('9.svg');"></div>
    <div id="svgBtn10" class="svg-btn" style="top:690.7px; background-image:url('10.svg');"></div>
    <div id="versionBtn" class="svg-btn" style="width:207.1px; height:69px; left:1702.8px; top:1004.2px; background-image:url('version.svg');"></div>

    <!-- プレビュー -->
    <div id="previewContainer">
      <iframe id="previewFrame"></iframe>
      <div id="iframeLoader"><div class="spinner"></div></div>
      <div id="noContentMsg">表示できるものがありません</div>
    </div>

    <!-- フルプレビュー -->
    <div id="fullscreenOverlay">
      <iframe id="fullscreenFrame"></iframe>
    </div>

    <div id="closeBtn"></div>
  </div>

<script>
const pageLoader = document.getElementById("pageLoader");
const previewFrame = document.getElementById("previewFrame");
const iframeLoader = document.getElementById("iframeLoader");
const noContentMsg = document.getElementById("noContentMsg");
const fullscreenOverlay = document.getElementById("fullscreenOverlay");
const fullscreenFrame = document.getElementById("fullscreenFrame");
const closeBtn = document.getElementById("closeBtn");

// ページロードスピナー
window.addEventListener("load", () => {
  setTimeout(() => { pageLoader.style.display = "none"; }, 500);
});

// ===== リサイズ =====
function resizeContainer() {
  const vw = window.innerWidth;
  const vh = window.innerHeight;
  const baseWidth = 1920;
  const baseHeight = 1080;
  const ratio = baseWidth / baseHeight;
  let scale;
  if (vw / vh > ratio) scale = vh / baseHeight;
  else scale = vw / baseWidth;
  document.getElementById('parentContainer').style.transform =
    `translate(-50%, -50%) scale(${scale})`;
}
window.addEventListener('resize', resizeContainer);
window.addEventListener('load', resizeContainer);

// ===== 左ボタン設定 =====
const selectBtns = [
  { el: document.getElementById("selectBtn1"), url: "https://shinkamigoto0908.github.io/wjh-sf-tougo-kinen-aisho-song-2024/" },
  { el: document.getElementById("selectBtn2"), url: "https://shinkamigoto0908.github.io/wjh-sf-nanchu-2025/" },
  { el: document.getElementById("selectBtn3"), url: "" },
  { el: document.getElementById("selectBtn4"), url: "" },
  { el: document.getElementById("selectBtn5"), url: "" },
  { el: document.getElementById("selectBtn6"), url: "" },
  { el: document.getElementById("selectBtn7"), url: "https://shinkamigoto0908.github.io/eig-dgc-r7-the_galaxy_express_999/" },
  { el: document.getElementById("selectBtn8"), url: "https://shinkamigoto0908.github.io/eig-dgc-r7-good_time/" }
];

// 初期状態
previewFrame.style.display = "none";
iframeLoader.style.display = "none";
noContentMsg.style.display = "none";

selectBtns.forEach(btnObj => {
  btnObj.el.addEventListener("click", () => {
    selectBtns.forEach(b => b.el.classList.remove("selected"));
    btnObj.el.classList.add("selected");

    if (btnObj.url) {
      iframeLoader.style.display = "flex";
      previewFrame.style.display = "block";
      noContentMsg.style.display = "none";

      previewFrame.src = btnObj.url;
      previewFrame.onload = () => { iframeLoader.style.display = "none"; };
    } else {
      previewFrame.src = "";
      previewFrame.style.display = "none";
      iframeLoader.style.display = "flex";
      setTimeout(() => { iframeLoader.style.display = "none"; }, 500);
      noContentMsg.style.display = "flex";
    }
  });
});

// プレビュークリックでフル表示
document.getElementById("previewContainer").addEventListener("click", () => {
  if (previewFrame.src && previewFrame.style.display === "block") {
    fullscreenFrame.src = previewFrame.src;
    fullscreenOverlay.style.display = "flex";
    closeBtn.style.display = "block";
  }
});

// 閉じる
closeBtn.addEventListener("click", () => {
  fullscreenOverlay.style.display = "none";
  fullscreenFrame.src = "";
  closeBtn.style.display = "none";
});

// 右ボタンリンク
const rightBtnLinks = {
  svgBtn1: "https://youtu.be/cx8AcBvFzFY?si=-yxDMLH3eKDPQA_u",
  svgBtn2: "https://youtu.be/MFhvU142d9A?si=pPuRQ0_Jtkn9GADa",
  svgBtn3: "https://youtu.be/gIWZX7t6L0o?si=NZinObYNe62CoJQh",
  svgBtn4: "https://youtu.be/CsfMCOEiiZ8?si=xn-rPWrzXKGv43Zo",
  svgBtn5: "nanchu.pdf",
  svgBtn9: "manual.pdf",
  svgBtn10: "https://forms.gle/oY8Wu1FyQgp32zgs6"
};

for (const id in rightBtnLinks) {
  const btn = document.getElementById(id);
  btn.addEventListener("click", async () => {
    pageLoader.style.display = "flex";
    try {
      await Promise.race([
        fetch(rightBtnLinks[id], { method: "HEAD", mode: "no-cors" }),
        new Promise(res => setTimeout(res, 2000))
      ]);
    } catch(e) {
      console.warn("プリロード失敗:", e);
    }
    pageLoader.style.display = "none";
    window.open(rightBtnLinks[id], "_blank");
  });
}
</script>
</body>
</html>
